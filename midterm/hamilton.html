<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="card.css">

        <style>
        .center {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        .back {
        transform: rotateY(-180deg);
        padding: 0 2em;
        font-size: large;
        text-align: left;
        }
        </style>
        
        <title>F1's Greatest Drivers</title>
    </head>
    <body>
        <a href="index.html">
            <img src="img/title.png" width="1000px" class="center">
        </a>

        <br>

        <img src="img/hamilton.png" width="800px" class="center">

        <br>

        <div class="container text-center">
            <div class="row">
                <div class="col-6">
                    <div class="content">
                        <a class="card center" href="#!">
                        <div class="front" style="background-image: url(https://media.formula1.com/content/dam/fom-website/drivers/2023Drivers/hamilton.jpg.img.1920.medium.jpg/1677069594164.jpg)">
                        </div>

                        <div class="back">
                        <div>
                            <img src="https://media.formula1.com/content/dam/fom-website/manual/Helmets2023/hamilton.png" width="300px">
                            <p style="margin-left: 75px; color: white;"><b>Country:</b> United Kingdom</p>
                            <p style="margin-left: 75px; color: white;"><b>Race Number:</b> 44</p>
                            <p style="margin-left: 75px; color: white;"><b>Years Active:</b> 2007 - present</p>
                        </div>
                        </div>
                        </a>
                    </div>
                </div>
                <div class="col">
                    <button id="request" class="btn btn-primary btn-lg center" style="background-color: #15151e; color: white;"> Click to learn more about Lewis Hamilton</button>
                    <div id="bio"></div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

        <script>
            (function() {
            'use strict';
            // desired selectors
            const btn = document.getElementById('request');
            const bio = document.getElementById('bio');

            // request
            const request = new XMLHttpRequest();

            request.onreadystatechange = function() {

                // check if data is sent back
                if(request.readyState === 4) {
                
                // check if data request is successful
                if(request.status === 200) {

                    //update html of div
                    console.log(request.responseText);
                    const jsonResponse = JSON.parse(request.responseText);
                    const textContent = jsonResponse.query.pages[675561].extract;
                    bio.innerHTML = textContent;        
                } else {
                    
                    // display error message
                    bio.innerHTML = 'An error occurred during your request: ' +  request.status + ' ' + request.statusText;
                }
                }
            }

            // click button for function
            btn.addEventListener('click', function() {
                console.log('button clicked');
                
                // request from data source
                request.open('Get', 'https://en.wikipedia.org/w/api.php?action=query&origin=*&prop=extracts&exintro&titles=Lewis_Hamilton&format=json');

                request.send();
                });
            })();
        </script>
    </body>
</html>